# 数据链路层

## 3.1_1 数据链路层功能

![image-20220903090507852](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209030905491.png)

### 研究思想

> 只是关心`水平`上的关系

![image-20220903091132298](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209030911498.png)

### 基本概念

![image-20220903091442269](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209030915369.png)

### 功能描述

![image-20220903091848928](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209030919878.png)

![image-20220903092156331](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209030921386.png)

## 3.2_1 封装成帧和透明传输

### 封装成帧

![image-20220903092826517](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209030928020.png)

### 透明传输

![image-20220903094126342](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209030941628.png)

#### 1.字符计数法

![image-20220903094650316](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209030946781.png)

#### 2.字符填充法

![image-20220903094905122](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209030949619.png)

##### 具体实现过程

> 发送时:填转义字符
>
> 接收时:删转义字符

![image-20220903095301349](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209030953644.png)

#### 3.零比特填充法

> 5110

![image-20220903100426450](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031004138.png)

#### 4.违规编码法

![image-20220903100720036](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031007273.png)

## 3.3_1 差错控制(检错编码)

### 差错从何而来?

![image-20220903102413729](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031024020.png)

### 差错控制

![image-20220903105001852](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031050007.png)

#### 检错编码

##### 奇偶校验码

![image-20220903105256416](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031052844.png)

##### CRC循环冗余码

![image-20220903110453626](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031104512.png)

###### 例题

![image-20220903111434628](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031114011.png)

![image-20220903111551314](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031115961.png)

![image-20220903112712222](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031127833.png)

#### 纠错编码

##### 海明码

![image-20220903113647700](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031136975.png)

##### 海明距离

> 找不同的个数,,并取最小值

![image-20220903113754637](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031137069.png)

##### 海明码检错和纠错能力

|  海明码   | 检错  |  纠错  |
| :-------: | :---: | :----: |
| 检/纠位数 |  `d`  |  `d`   |
|   码距    | `d+1` | `2d+1` |

##### 海明码流程

###### 1.确定校验码位数r

![image-20220903131015434](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031310202.png)

###### 2.确定校验码和数据的位置

![image-20220903131407713](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031314293.png)

###### 3.求出校验码的值

![image-20220903131815487](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031318196.png)

###### 4.检错并纠错

![image-20220903132307978](C:\Users\29608\AppData\Roaming\Typora\typora-user-images\image-20220903132307978.png)

![image-20220903133431683](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031334972.png)

### 总结

![image-20220903133951162](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031339561.png)

## 3.4_1 流量控制与可靠传输机制

### 数据链路层的流量控制

![image-20220903151219625](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031512671.png)

#### 流量控制的方法

![image-20220903151807581](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031518659.png)

![image-20220903151954125](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031519463.png)

### 可靠传输,滑动窗口,流量控制

![image-20220903152437386](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031524204.png)

### 总结

![image-20220903152534473](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031525265.png)

## 3.4_2 停止-等待协议

![image-20220903153852430](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031538403.png)

### 应用情况

#### 无差错情况

![image-20220903154139550](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031541453.png)

#### 有差错情况

##### 1.数据帧丢失或检测到帧出错

![image-20220903161433929](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031614702.png)

##### 2.ACK(确认帧)丢失

![image-20220903161758209](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031617373.png)

##### 3.ACK(确认帧)迟到

![image-20220903162033623](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031620968.png)

### 性能分析

![image-20220903162317027](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031623180.png)

### 信道利用率&信道吞吐率

![image-20220903162733996](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031627071.png)

### 总结

![image-20220903162936941](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031629237.png)

## 3.4_3 后退N帧协议(GBN)

### 停等协议的弊端

![image-20220903163602964](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031636641.png)

#### 流水线计数

![image-20220903195648116](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209031956644.png)

### GBN中的滑动窗口

![image-20220903200003313](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032000236.png)

![image-20220903200120456](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032001213.png)

### 发送方必须响应的三件事

![image-20220903200614008](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032006672.png)

### 接收方要做的事

![image-20220903201212573](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032012986.png)

### 运行中的GBN

> expection变量为接收方期待的发送帧序号

![image-20220903201516549](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032015922.png)

### 滑动窗口的长度

![image-20220903201946572](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032019626.png)

### GBN重点总结

 ![image-20220903203212915](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032032391.png)

#### 习题1

![image-20220903203406521](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032034040.png)

#### 习题2

![image-20220903205818574](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032058806.png)

### GBN性能

![image-20220903210007071](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032100143.png)

### 总结

![image-20220903210211778](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032102200.png)

## 3.4_4 选择重传协议(SR)

### GBN协议的弊端

![image-20220903210620048](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032106363.png)

### 选择重传协议的滑动窗口

![image-20220903211539450](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032115150.png)

### SR发送方必须响应的三件事

![image-20220903211824215](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032118426.png)

![image-20220903211853825](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032118158.png)

### 接收方要做的事

![image-20220903212019222](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032120198.png)

![image-20220903212129063](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032121845.png)

### 运行中的SR

> 2帧超时重传

![image-20220903212424035](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209032124715.png)

### 滑动窗口的长度

> 这里的n表示是窗口长度所需的比特数
>
> 发送窗口大小最好与接收窗口大小`相等`

![image-20220904084811869](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040848124.png)

### SR重点总结

![image-20220904090630949](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040906329.png)

#### 例题1

![image-20220904090754974](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040907459.png)

### 总结

![image-20220904090831667](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040908254.png)

## 3.5_1 介质访问控制

![image-20220904091627677](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040916511.png)

### 介质访问控制

![image-20220904091855121](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040918845.png)

#### 信道划分介质访问控制

> `广播`信号逻辑成`点对点`信号

![image-20220904092114147](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040921309.png)

#### 静态划分信道

![image-20220904092410843](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040924988.png)

##### 1.频分复用FDM

![image-20220904092546114](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040925717.png)

##### 2.时分复用TDM

> 效率比较低...

![image-20220904092806823](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040928018.png)

##### 3.统计时分复用STDM

![image-20220904093133106](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040931655.png)

##### 4.波分复用WDM

> 光的频分复用

![image-20220904093511988](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040935455.png)

##### 5.码分复用CDM

![image-20220904094747052](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040947685.png)

###### CD还是CS?

![image-20220904094954089](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040949324.png)

## 3.5_2 ALOHA协议

> 随机访问->不协调->冲突

![image-20220904095613223](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209040956429.png)

![image-20220904100341028](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209041003911.png)

### 纯ALOHA协议

> 想发就发

![image-20220904101331213](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209041013441.png)

### 时隙ALOHA协议

> 纯ALOHA协议太随意,容易出冲突
>
> 这里要求在冲突在下一个时间片开始时刻发送

![image-20220904101653863](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209041016138.png)

### 总结

![image-20220904101843520](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202209041018439.png)
