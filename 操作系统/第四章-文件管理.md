# 文件管理

## 4.1_1 初识文件管理

![image-20220827191349405](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271913735.png)

### 文件的属性

![image-20220827191728030](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271917402.png)

### `文件内部`数据如何组织?

![image-20220827191935842](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271919484.png)

[文件的逻辑结构](#4.1_2 文件的逻辑结构)

![image-20220827192057601](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271921284.png)

### `文件之间`数据如何组织?

![image-20220827192719936](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271927337.png)

[目录](#4.1_3 文件目录)

> 其实就是文件夹



### OS为上层提供哪些功能?

![image-20220827192607285](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271926960.png)

![image-20220827192929180](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271929389.png)

[背后的处理]()

### 文件`如何存放在外存`?

> 以`块`为单位,为文件分配存储空间

![image-20220827193146458](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271931579.png)

![image-20220827193620519](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271936177.png)

[文件的物理结构](#4.2_4 物理结构(上))

### 其他文件管理功能

![image-20220827193758826](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271938345.png)

[Windows操作系统]()

### 总结

![image-20220827193955828](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271939376.png)

## 4.1_2 文件的逻辑结构

![image-20220827195347162](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271953465.png)

### 无结构文件

> 无结构特性

![image-20220827195558617](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271955711.png)

### 有结构文件

![image-20220827195734160](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208271957677.png)

- 是否定长

![image-20220827195958600](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208272000293.png)

#### 逻辑结构

##### 1.顺序文件

![image-20220827200506207](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208272005155.png)



![image-20220827201310404](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208272013992.png)

##### 2.索引文件

> 索引表:是一个`定长记录的顺序结构的顺序文件`,支持`随机访问`
>
> - 如果关键字有序的话,可实现`折半查找`

![image-20220827201528940](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208272015305.png)

##### 3.索引顺序文件

> 索引顺序表:是一个`定长记录的串结构的顺序文件`
>
> - 相对于`索引文件的瘦身版`

![image-20220827202235994](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208272022772.png)

###### 检索效率分析

![image-20220827204400433](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208272044800.png)

##### 4.多级索引顺序文件

![image-20220827204850037](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208272048620.png)

### 总结

![image-20220827205002384](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208272050031.png)

#### 有结构文件

![image-20220827213409947](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208272134099.png)

## 4.1_3 文件目录

![image-20220827214503276](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208272145196.png)

![image-20220827214855284](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208272148848.png)

### 文件控制块FCB

![image-20220828063022135](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280630546.png)

 FCB

> 文件的目录:FCB文件控制块(目录项)的有序集合

![image-20220828063206895](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280632529.png)

 ![image-20220828063536146](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280635560.png)

#### 1.单级目录结构

> - 优点:
>
>   - 实现了`按名存取`
>
> - 缺点:
>
>   - `不允许文件重名`
>
>   - `不适合多用户`

![image-20220828063814458](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280638486.png)

#### 2.两级目录结构

> - 优点:`支持多用户`的访问控制
> - 缺点:不支持用户对自己的文件进行分类

![image-20220828064228781](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280642019.png)

####  3.多级目录结构

> 又称`树形结构`
>
> - 优点:
>
>   - 方便对文件分类
>
>   - 能够更有效的进行文件的管理和保护
>
> - 缺点:
>   - `不便于实现文件的共享`

![image-20220828064457000](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280644875.png)

##### 当前目录

![image-20220828064821791](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280648548.png)

#### 4.无环图目录结构

![image-20220828065409124](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280654745.png)

##### 删除操作

> 只删除对应的文件目录`&`共享计数器-1

![image-20220828065539975](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280655394.png)

### 索引结点(FCB的改进版)

> 让文件的索引速度更快,实现`瘦身`

![image-20220828070111625](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280701756.png)

#### 优点

![image-20220828070604747](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280706033.png)

### 总结

![image-20220828070900940](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280709191.png)

## 4.2_4 物理结构(上)

![image-20220828072819740](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280728000.png)



> 又称[文件的分配方式](#文件分配方式),管理有文件数据的磁盘块

![image-20220828073156805](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280731319.png)

### 磁盘块

> 磁盘与内存进行数据交换更方便
>
> 因为大小和内存块,页面大小相同

![image-20220828073330238](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280733438.png)

### 文件块

> 逻辑地址=(逻辑块号,块内地址)

![image-20220828083753317](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280837586.png)

### 文件分配方式

#### 1.连续分配

> 优点1:支持顺序访问和`随机访问`(直接访问)

![image-20220828084204851](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280842283.png)

> 优点2:连续分配的文件在`顺序读/写`速度最快

![image-20220828084517807](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280845000.png)

> 缺点1:连续分配的文件不便于拓展

![image-20220828084736531](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280847661.png)

> 缺点2:会产生磁盘碎片
>
> 可以通过`紧凑`的方式处理,但仍需要很多时间

![image-20220828084930416](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280849867.png)

##### 总结

![image-20220828085109946](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280851131.png)

#### 2.链接分配

##### 隐式链接

> 如何实现文件的逻辑块->物理块的转变?

![image-20220828085705497](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280857441.png)

> 是否方便拓展文件

![image-20220828085754397](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280857736.png)

###### 总结

![image-20220828085825095](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280858672.png)

##### 显式链接

> 将链接文件各物理块的指针显示存放在一张表中,
>
> `文件分配表FAT`常驻在内存
>
> - 一个磁盘对应一张`FAT`

![image-20220828090304871](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280903364.png)

> 如何实现文件逻辑块号->物理块的转变

![image-20220828091258251](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280913311.png)

###### 总结

![image-20220828091922087](https://cdn.jsdelivr.net/gh/DZX-hhh/Pictures/images/202208280919376.png)